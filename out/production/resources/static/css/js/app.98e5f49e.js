(function(e){function t(t){for(var a,s,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&m.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,i=1;i<r.length;i++){var l=r[i];0!==n[l]&&(a=!1)}a&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},o=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1f92":function(e,t,r){"use strict";var a=r("c2fd"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"layout"},[r("Layout",[r("Header",[r("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[r("div",{staticClass:"layout-logo"}),r("div",{staticClass:"layout-nav"},[r("MenuItem",{attrs:{name:"1"}},[r("Icon",{attrs:{type:"ios-navigate"}}),r("router-link",{attrs:{to:"/"}},[e._v("首页")])],1),r("MenuItem",{attrs:{name:"2"}},[r("Icon",{attrs:{type:"ios-keypad"}}),r("router-link",{attrs:{to:"mylibrary"}},[e._v("我的图书馆")])],1),!0===e.isLogin?r("MenuItem",{attrs:{name:"3"}},[r("Icon",{attrs:{type:"ios-analytics"}}),r("router-link",{attrs:{to:"userprofile"}},[e._v(e._s(e.username))])],1):e._e(),!1===e.isLogin?r("MenuItem",{attrs:{name:"3"}},[r("router-link",{attrs:{to:"login"}},[e._v("登录")])],1):e._e()],1)])],1),r("Content",{style:{padding:"0 50px"}},[r("Card",[r("div",{staticStyle:{"min-height":"200px"}},[r("router-view")],1)])],1),r("Footer",{staticClass:"layout-footer-center"},[e._v("2011-2016 © TalkingData")])],1)],1)])},o=[],s=(r("96cf"),r("1da1")),i=(r("b0c0"),r("2f62"));a["default"].use(i["a"]);var l=new i["a"].Store({state:{formInline:"",bookId:0},mutations:{loginData:function(e,t){e.name=t.name,e.password=t.password},setBookId:function(e,t){e.bookId=t}},actions:{},modules:{}}),u={data:function(){return{isLogin:!1,modal1:!1,username:"",store:l}},created:function(){this.isLogined()},methods:{isLogined:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("执行isLogin"),!window.localStorage.getItem("token")){t.next=9;break}return t.next=4,e.$Http.isLogin();case 4:r=t.sent,console.log(r.data),console.log(r.status),200===r.status&&(e.isLogin=!0,e.username=r.data),console.log(r);case 9:case"end":return t.stop()}}),t)})))()}}},c=u,d=(r("1f92"),r("5c64"),r("2877")),m=Object(d["a"])(c,n,o,!1,null,"18153994",null),p=m.exports,f=r("8c4f"),h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Tabs",{attrs:{value:"name1"}},[r("TabPane",{attrs:{label:"库存图书",name:"name1"}},[r("getbooklist")],1),r("TabPane",{attrs:{label:"Isbn添加",name:"name2"}},[r("addbookfromisbn")],1),r("TabPane",{attrs:{label:"手动添加",name:"name3"}},[r("addbookfromhand")],1)],1)},b=[],g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container-thingy"},[r("ul",e._l(e.booklist,(function(t,a){return r("li",{key:a},[r("a",{on:{click:function(r){return e.setBookId(t.id)}}},[r("p",[r("img",{attrs:{src:t.img,alt:"神圣家族",width:"115",height:"172"}})]),r("p",[e._v("作者:"+e._s(t.author))]),r("p",[e._v("出版社:"+e._s(t.publisher))])])])})),0)])},v=[],k={name:"getbooklist",data:function(){return{booklist:[]}},created:function(){this.getList()},methods:{getList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getBookList();case 2:r=t.sent,e.booklist=r.data,console.log(r.data);case 5:case"end":return t.stop()}}),t)})))()},setBookId:function(e){console.log("执行setBookId函数"),this.$store.commit("setBookId",e),this.$router.push("/"+l.state.bookId)}}},w=k,_=(r("8080"),Object(d["a"])(w,g,v,!1,null,"30b6b700",null)),I=_.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"formValidateIsbn",attrs:{model:e.formValidateIsbn,rules:e.ruleValidateIsbn,"label-width":80,"label-position":"left"}},[r("FormItem",{attrs:{label:"ISBN编码",prop:"isbn"}},[r("Input",{attrs:{placeholder:"输入ISBN"},model:{value:e.formValidateIsbn.isbn,callback:function(t){e.$set(e.formValidateIsbn,"isbn",t)},expression:"formValidateIsbn.isbn"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidateIsbn")}}},[e._v("提交")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.addBook()}}},[e._v("保存")])],1)],1),r("div",[r("Row",{staticStyle:{background:"#eee",padding:"20px"}},[r("Col",{attrs:{span:"11"}},[r("Card",{attrs:{bordered:!1}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("图书信息")]),r("p",[e._v("出版日期: "+e._s(e.pubdate))]),r("p",[e._v("纸张: "+e._s(e.paper))]),r("p",[e._v("规格: "+e._s(e.format))]),r("p",[e._v("出版社: "+e._s(e.publisher))]),r("p",[e._v("作者: "+e._s(e.author))]),r("p",[e._v("书名: "+e._s(e.title))]),r("p",[e._v("售价: "+e._s(e.price))]),r("p",[e._v("页数: "+e._s(e.page))]),r("p",[e._v("ISBN: "+e._s(e.isbn))]),r("p",[e._v("装订: "+e._s(e.binding))]),r("p",[e._v("生产: "+e._s(e.produce))])])],1),r("Col",{attrs:{span:"11",offset:"2"}},[r("Card",{attrs:{shadow:""}},[r("p",{attrs:{slot:"title"},slot:"title"},[e._v("简介")]),r("p",[r("img",{attrs:{src:e.img,alt:e.title,width:"200",height:"250"}})]),r("p",[e._v(e._s(e.gist))]),r("p",[e._v("测试用例:9787569210460")])])],1)],1)],1)],1)},x=[],$=r("bc3a"),V=r.n($),B={data:function(){return{pubdate:"",paper:"",img:"",gist:"",format:"",publisher:"",author:"",title:"",price:"",page:"",isbn:"",binding:"",produce:"",revdata:[],formValidateIsbn:{isbn:""},ruleValidateIsbn:{isbn:[{required:!0,message:"ISBN不能为空",trigger:"blur"}]}}},methods:{getList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getBookList();case 2:r=t.sent,e.booklist=r.data;case 4:case"end":return t.stop()}}),t)})))()},getBookMsg:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.getBookMsg(e.formValidateIsbn);case 2:r=t.sent,e.revdata=r.data.showapi_res_body.data,e.pubdate=e.revdata.pubdate,e.paper=e.revdata.paper,e.format=e.revdata.format,e.publisher=e.revdata.publisher,e.author=e.revdata.author,e.price=e.revdata.price,e.page=e.revdata.page,e.isbn=e.revdata.isbn,e.binding=e.revdata.binding,e.produce=e.revdata.produce,e.img=e.revdata.img,e.gist=e.revdata.gist,200===r.code&&alert("查询成功");case 17:case"end":return t.stop()}}),t)})))()},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?t.getBookMsg():t.$Message.error("Fail!")}))},handleReset:function(e){this.$refs[e].resetFields()},addBook:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.addBookJson(e.revdata);case 2:r=t.sent,200===r.status&&(console.log("保存成功"),e.$Message.success("保存成功"),e.getList());case 4:case"end":return t.stop()}}),t)})))()}}},O=B,S=Object(d["a"])(O,y,x,!1,null,null,null),j=S.exports,F=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80,"label-position":"left"}},[r("FormItem",{attrs:{label:"书名",prop:"title"}},[r("Input",{attrs:{placeholder:"输入书名"},model:{value:e.formValidate.title,callback:function(t){e.$set(e.formValidate,"title",t)},expression:"formValidate.title"}})],1),r("FormItem",{attrs:{label:"作者",prop:"author"}},[r("Input",{attrs:{placeholder:"输入作者"},model:{value:e.formValidate.author,callback:function(t){e.$set(e.formValidate,"author",t)},expression:"formValidate.author"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"}},[e._v("提交")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("重置")])],1)],1)},R=[],M={data:function(){return{formValidate:{title:"",author:""},ruleValidate:{title:[{required:!0,message:"标题不能为空",trigger:"blur"}],author:[{required:!0,message:"作者不能为空",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?(t.instance=V.a.create({baseURL:"http://123.56.166.234:8001/",timeout:3e3}),t.instance.post("/restful/addbookfromhand/",t.formValidate).then((function(e){console.log(e),t.$Message.success("Success!")}))):t.$Message.error("Fail!")}))},handleReset:function(e){this.$refs[e].resetFields()}}},L=M,E=Object(d["a"])(L,F,R,!1,null,null,null),C=E.exports,P={name:"home",components:{getbooklist:I,addbookfromisbn:j,addbookfromhand:C}},T=P,q=Object(d["a"])(T,h,b,!1,null,null,null),H=q.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline,inline:""}},[r("FormItem",{attrs:{prop:"name"}},[r("Input",{attrs:{type:"text",placeholder:"Username"},model:{value:e.formInline.name,callback:function(t){e.$set(e.formInline,"name",t)},expression:"formInline.name"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"Password"},model:{value:e.formInline.password,callback:function(t){e.$set(e.formInline,"password",t)},expression:"formInline.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v("Signin")])],1),r("FormItem",[r("Button",[r("router-link",{attrs:{to:"register"}},[e._v("注册")])],1)],1)],1)],1)},U=[],J={name:"login",data:function(){return{formInline:{name:"",password:""},ruleInline:{name:[{required:!0,message:"Please fill in the user name",trigger:"blur"}],password:[{required:!0,message:"Please fill in the password.",trigger:"blur"},{type:"string",min:6,message:"The password length cannot be less than 6 bits",trigger:"blur"}]}}},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?t.login():t.$Message.error("校验失败!")}))},login:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.login(e.formInline,!0);case 2:if(r=t.sent,console.log(r),"ok"!==r.data.status){t.next=11;break}return window.localStorage.setItem("token",r.headers.token),e.$Message.success("登录成功"),t.next=9,e.$router.push("/");case 9:t.next=12;break;case 11:e.$Message.error("登录失败: "+r.data.message);case 12:case"end":return t.stop()}}),t)})))()}},watch:{"formInline.password":{handler:function(e,t){this.$store.commit("loginData",this.formInline)}}}},N=J,z=Object(d["a"])(N,D,U,!1,null,null,null),A=z.exports,G=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},K=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[e._v(" mylibrary ")])])}],Q={name:"mylibrary"},W=Q,X=Object(d["a"])(W,G,K,!1,null,"a5c44790",null),Y=X.exports,Z=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},ee=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[e._v(" userprofile ")])])}],te={name:"userprofile"},re=te,ae=Object(d["a"])(re,Z,ee,!1,null,"ffdfe272",null),ne=ae.exports,oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[r("FormItem",{attrs:{label:"用户名",prop:"name"}},[r("Input",{attrs:{placeholder:"Enter your name"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),r("FormItem",{attrs:{label:"E-mail",prop:"email"}},[r("Input",{attrs:{placeholder:"Enter your e-mail"},model:{value:e.formValidate.email,callback:function(t){e.$set(e.formValidate,"email",t)},expression:"formValidate.email"}})],1),r("FormItem",{attrs:{label:"手机号码",prop:"mobile"}},[r("Input",{attrs:{placeholder:"Enter your mobile"},model:{value:e.formValidate.mobile,callback:function(t){e.$set(e.formValidate,"mobile",t)},expression:"formValidate.mobile"}})],1),r("FormItem",{attrs:{label:"密码",prop:"password"}},[r("Input",{attrs:{placeholder:"Enter your password"},model:{value:e.formValidate.password,callback:function(t){e.$set(e.formValidate,"password",t)},expression:"formValidate.password"}})],1),r("FormItem",{attrs:{label:"确认密码",prop:"repassword"}},[r("Input",{attrs:{placeholder:"Enter your password agin"},model:{value:e.formValidate.repassword,callback:function(t){e.$set(e.formValidate,"repassword",t)},expression:"formValidate.repassword"}})],1),r("FormItem",[r("Button",{attrs:{type:"primary"},on:{click:function(t){return e.handleSubmit("formValidate")}}},[e._v("Submit")]),r("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.handleReset("formValidate")}}},[e._v("Reset")])],1)],1)},se=[],ie={name:"register",data:function(){return{formValidate:{name:"",email:"",mobile:"",password:"",repassword:""},ruleValidate:{name:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],mail:[{required:!0,message:"Mailbox cannot be empty",trigger:"blur"},{type:"email",message:"Incorrect email format",trigger:"blur"}],password:[{required:!0,message:"password"}],repassword:[{required:!0,message:"repassword"}],mobile:[{required:!0,message:"mobile"}]}}},methods:{register:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$Http.addUser(e.formValidate,!0);case 2:r=t.sent,console.log(r.data),"000000"===r.data.rspCode&&(e.$Message.success("注册成功!"),e.$router.push("/"));case 5:case"end":return t.stop()}}),t)})))()},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){e?t.register():t.$Message.error("验证失败!")}))},handleReset:function(e){this.$refs[e].resetFields()}}},le=ie,ue=Object(d["a"])(le,oe,se,!1,null,null,null),ce=ue.exports,de=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[e._v(" 图书详情 ")]),e._l(e.BookDetails,(function(t,a){return r("ul",{key:e.index},[r("li",[e._v(e._s(a)+" : "+e._s(t))])])}))],2)},me=[],pe={name:"BookDetails",data:function(){return{BookDetails:[],id:null,params:1}},created:function(){var e=this;this.instance=V.a.create({baseURL:"http://123.56.166.234:8001/",timeout:3e3}),this.instance.get("/restful/bookdetails/"+l.state.bookId).then((function(t){e.BookDetails=t.data,console.log(t)}))},methods:{}},fe=pe,he=Object(d["a"])(fe,de,me,!1,null,"17ad148a",null),be=he.exports;a["default"].use(f["a"]);var ge=[{path:"",name:"Home",component:H},{path:"/mylibrary",name:"mylibrary",component:Y},{path:"/userprofile",name:"userprofile",component:ne},{path:"/login",name:"login",component:A},{path:"/register",name:"register",component:ce},{path:"/:id",name:"bookdetails",component:be}],ve=new f["a"]({routes:ge}),ke=ve,we=r("f8ff"),_e=r.n(we),Ie=r("f825"),ye=r.n(Ie),xe=(r("f8ce"),{getBookList:{method:"get",url:"/restful/booklist"},getBookMsg:{method:"post",url:"/restful/addbookfromisbn"},addBookJson:{method:"post",url:"/restful/tasks/addbook",headers:{"Content-Type":"application/x-www-form-urlencoded"}},delBook:{method:"delete",url:"/restful/deletebook"},addUser:{method:"post",url:"/restful/register"},login:{method:"post",url:"/restful/login"},isLogin:{method:"post",url:"/restful/tasks"},getBookDetails:{method:"get",url:"/restful/bookdetails/"}}),$e=xe,Ve=V.a.create({baseURL:"http://123.56.166.234:8001/",timeout:3e3}),Be={},Oe=function(e){var t=$e[e];Be[e]=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(r){var a,n,o,s,i,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=l.length>1&&void 0!==l[1]&&l[1],n=l.length>2&&void 0!==l[2]?l[2]:{},o={},r&&a)for(s in o=new FormData,r)o.append(s,r[s]);else o=r;if(i={},"put"!==t.method&&"post"!==t.method&&"patch"!==t.method){e.next=17;break}return e.prev=6,e.next=9,Ve[t.method](t.url,o,n);case 9:i=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](6),i=e.t0;case 15:e.next=28;break;case 17:if("delete"!==t.method&&"get"!==t.method){e.next=28;break}return n.params=o,e.prev=19,e.next=22,Ve[t.method](t.url,n);case 22:i=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e["catch"](19),i=e.t1;case 28:return e.abrupt("return",i);case 29:case"end":return e.stop()}}),e,null,[[6,12],[19,25]])})));return function(t){return e.apply(this,arguments)}}()};for(var Se in $e)Oe(Se);Ve.interceptors.request.use((function(e){return window.localStorage.getItem("token")&&(e.headers.common["Content-Type"]="application/x-www-form-urlencoded",e.headers.common["Authorization"]=localStorage.getItem("token")),e}),(function(){Toast.clear(),Toast("请求错误，请求稍后重试")}));var je=Be;r("3a27"),r("de48");a["default"].use(_e.a),a["default"].use(ye.a),a["default"].prototype.$Http=je,a["default"].config.devtools=!0,new a["default"]({router:ke,store:l,render:function(e){return e(p)}}).$mount("#app")},"5c64":function(e,t,r){"use strict";var a=r("d32a"),n=r.n(a);n.a},8080:function(e,t,r){"use strict";var a=r("b1a8"),n=r.n(a);n.a},b1a8:function(e,t,r){},c2fd:function(e,t,r){},d32a:function(e,t,r){}});
//# sourceMappingURL=app.98e5f49e.js.map